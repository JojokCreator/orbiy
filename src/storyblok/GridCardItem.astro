---
import { storyblokEditable } from "@storyblok/astro";
import { Picture } from "astro:assets";

const { card, isFullHeight } = Astro.props;
const { title, price, description, image, imageAlt, link } = card;

// Generate link URL
const linkUrl = link?.cached_url || link?.url || "#";
---

<article class="group relative overflow-hidden rounded-2xl shadow-lg">
  <a href={linkUrl} class="block">
    {/* Card Image */}
    <div
      class={`aspect-[16/9] sm:aspect-[4/3] ${isFullHeight ? "aspect-[9/16] sm:aspect-[3/5]" : ""}`}
    >
      {
        image?.filename && (
          <Picture
            src={image.filename}
            inferSize={true}
            formats={["avif", "webp"]}
            alt={imageAlt || title}
            widths={[400, 600, 800]}
            sizes="(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 400px"
            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-[1.01]"
          />
        )
      }
    </div>

    {/* Gradient Overlay */}
    <div
      class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-60 group-hover:opacity-80 transition-opacity duration-300"
    >
    </div>

    {/* Content Overlay */}
    <div class="absolute bottom-0 left-0 right-0 p-4 sm:p-6">
      <h3
        class="text-white font-medium text-base sm:text-lg md:text-xl mb-2 leading-tight"
      >
        {title}
      </h3>

      {
        price && (
          <p class="text-2xl md:text-3xl font-medium text-gray py-4">
            <span class="text-base text-light-gray">From </span>
            {price}
            <span class="text-base text-light-gray">/day</span>
          </p>
        )
      }

      {
        description && (
          <p class="text-white text-sm line-clamp-2 leading-relaxed hidden sm:block">
            {description}
          </p>
        )
      }
    </div>

    {/* Hover Border Effect */}
    <div
      class="absolute inset-0 border-2 border-white/0 group-hover:border-white/20 transition-all duration-300 rounded-2xl pointer-events-none"
    >
    </div>
  </a>
</article>
