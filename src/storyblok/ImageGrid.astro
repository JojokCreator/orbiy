---
import { storyblokEditable } from "@storyblok/astro";
import GridImage from "../components/GridImage.astro";

interface GridCard {
  title: string;
  price: string;
  image: {
    filename: string;
    alt?: string;
  };
  imageAlt?: string;
  link?: {
    cached_url?: string;
    url?: string;
  };
}

interface ImageGridProps {
  title: string;
  text?: string;
  grid_cards?: GridCard[];
  [k: string]: any;
}

const { blok } = Astro.props as { blok: ImageGridProps };
const { title, text, grid_cards } = blok;

// Get grid cards from Storyblok data
const cards: GridCard[] = grid_cards || [];
---

<section {...storyblokEditable(blok)} class="vertical-p bg-red w-screen">
  <div class="site-container">
    <div>
      <h2 class="text-white">
        {title}
      </h2>

      {text && <p class="text-white mt-4 lg:max-w-3/4">{text}</p>}
      <div class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-14">
        {
          cards[0] && (
            <div class="block md:hidden">
              <GridImage
                card={cards[0]}
                link={cards[0].link}
                isFirst={false}
                isMobile={true}
              />
            </div>
          )
        }

        {
          cards[0] && (
            <div class="hidden md:block h-full">
              <GridImage
                card={cards[0]}
                link={cards[0].link}
                isFirst={true}
                isMobile={false}
              />
            </div>
          )
        }

        <div class="flex flex-col gap-8 md:gap-12 h-full">
          {
            cards
              .slice(1, 3)
              .map((card) => (
                <GridImage
                  card={card}
                  link={card.link}
                  isFirst={false}
                  isMobile={false}
                />
              ))
          }
        </div>
      </div>
    </div>
  </div>
</section>
