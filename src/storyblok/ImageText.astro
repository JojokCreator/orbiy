---
import { storyblokEditable } from "@storyblok/astro";
import { Picture } from "astro:assets";
import Button from "../components/reusable/Button.astro";

const { blok } = Astro.props;
const { header, title, text, button, image, image_side } = blok;

// Determine layout classes based on image position
const layoutClasses =
  image_side === "right" ? "lg:flex-row-reverse" : "lg:flex-row";
---

<section {...storyblokEditable(blok)} class="py-12 md:py-16 lg:py-20 bg-white">
  <div class="site-container">
        {header && (
          <p class="text-blue-gray font-semibold pb-2 md:pb-4">{header}</p>
          <hr class="border-t border-blue-gray h-1 w-full pb-6 md:pb-8" />
        )}
    <div
      class={`grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-start ${layoutClasses}`}
    >
      {/* Content Side */}
      <div class="space-y-6">
        {
          title && (
            <h2 class="text-black mb-4 md:mb-8">
              {title}
            </h2>
          )
        }
        {
          text && (
              <p class="text-gray text-lg leading-relaxed">{text}</p>
          )
        }

        {
          button && button.length > 0 && (
            <div class="pt-4">
              <Button
                type={button[0].style}
                buttonText={button[0].text}
                link={"/"+button[0].link?.cached_url || "#"}
                class="inline-flex"
              />
            </div>
          )
        }
      </div>

      {/* Image Side */}
      <div class="order-first lg:order-none">
        <Picture
          src={image.filename}
          formats={["avif", "webp"]}
          alt={image.alt || title}
          widths={[400, 600, 800]}
          sizes="(max-width: 640px) 100vw, (max-width: 1023px) 384px, 576px"
          inferSize={true}
          class="w-full h-auto object-cover rounded-lg max-w-sm lg:max-w-xl"
        />
      </div>
    </div>
  </div>
</section>
