---
import BlogCard from "./BlogCard.astro";
import placeholder from "../../assets/placeholder.svg";
import { Icon } from "astro-icon/components";
const { title, linkAhref, linkText, posts, locale } = Astro.props;

const samplePosts = [
	{
		image: placeholder,
		title: "Title",
		snippet: "Lorem Ipsmun sdsd sd sd",
		category: "",
		slug: "/",
	},
	{
		image: placeholder,
		title: "Title",
		snippet: "Lorem Ipsmun sdsd sd sd",
		category: "",
		slug: "/",
	},
	{
		image: placeholder,
		title: "Title",
		snippet: "Lorem Ipsmun sdsd sd sd",
		category: "",
		slug: "/",
	},
	{
		image: placeholder,
		title: "Title",
		snippet: "Lorem Ipsmun sdsd sd sd",
		category: "",
		slug: "/",
	},
	{
		image: placeholder,
		title: "Title",
		snippet: "Lorem Ipsmun sdsd sd sd",
		category: "",
		slug: "/",
	},
	{
		image: placeholder,
		title: "Title",
		snippet: "Lorem Ipsmun sdsd sd sd",
		category: "",
		slug: "/",
	},
];
---

<div class="site-container relative px-4 py-14 2xl:px-0">
	<div class="flex items-center justify-between px-4 py-2 2xl:px-0">
		<h2 class="z-10 mb-6 text-4xl font-bold sm:text-5xl">{title}</h2>
	</div>
	<swiper-container
		navigation="true"
		pagination="true"
		init="false"
		class="!p-8 !pb-16"
	>
		{
			samplePosts.map((post) => (
				<swiper-slide>
					<BlogCard
						title={post.title}
						image={post.image}
						snippet={post.snippet}
						category={post.category}
						slug={post.slug}
					/>
				</swiper-slide>
			))
		}
	</swiper-container>
	<div class="absolute left-0 top-1/2 z-20 -translate-y-1/2">
		<Icon
			size="44"
			name="chevronDown"
			class="my-swiper-button-next rotate-90 size-12 cursor-pointer rounded-full bg-white/80 p-2 shadow-lg transition-all duration-200 hover:bg-white hover:scale-110 hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"
		>
			<span class="sr-only">Previous slide</span>
		</Icon>
	</div>
	<div class="absolute right-0 top-1/2 z-20 -translate-y-1/2">
		<Icon
			size="44"
			name="chevronDown"
			class="my-swiper-button-prev -rotate-90 size-12 cursor-pointer rounded-full bg-white/80 p-2 shadow-lg transition-all duration-200 hover:bg-white hover:scale-110 hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"
		>
			<span class="sr-only">Next slide</span>
		</Icon>
	</div>
</div>

<script>
	import { register, type SwiperContainer } from "swiper/element";
	import { Navigation, Pagination } from "swiper/modules";

	register();

	const swiperEl = document.querySelector(
		"swiper-container",
	) as SwiperContainer;

	const params = {
		pagination: {
			clickable: true,
		},
		navigation: {
			nextEl: ".my-swiper-button-next",
			prevEl: ".my-swiper-button-prev",
		},
		modules: [Navigation, Pagination],
		injectStylesUrls: ["/pagination-element.min.css"],
		slidesPerView: 1,
		breakpoints: {
			768: {
				slidesPerView: 3,
				spaceBetween: 32,
			},
		},
	};

	Object.assign(swiperEl, params);

	swiperEl.initialize();
</script>
